on post-fs-data
    #SDD:Modify KBBGHLESGQ-122 by zhao.li for folder permission 20190823 start
    mkdir /data/TNE 0777 root root
    #SDD:Modify KBBGHLESGQ-122 by zhao.li for folder permission 20190823 end
    mkdir /data/hprof 0777 system system
    mkdir /data/tran_hprof 0777 system system
    #mkdir /tranfs/stuck_logo 0755 root root
    #SDD:Modify KBBGHLESGQ-112 by lihua.sheng 20191011 start
    #mkdir /tranfs/SDD/ 0777 root root
    #mkdir /tranfs/SDD/ExceptionReport/ 0777 root root
    #SDD:Modify KBBGHLESGQ-112 by lihua.sheng 20191011 end
    copy /system/etc/TNE_TAG.txt /data/TNE/TNE_TAG.txt
    chmod 0644 /data/TNE/TNE_TAG.txt
    chmod 0666 /dev/tnek
    write /data/TNE/hang_detect_trace 0
    chmod 0664 /data/TNE/hang_detect_trace
    write /data/TNE/config 0
    chmod 0644 /data/TNE/config

service tne /system/bin/tne
    class core
    user root
    group root
    disabled
    #writepid /dev/cpuset/system-background/tasks
    task_profiles ServiceCapacityLow Serviceperformance


on property:ro.transsion.tne.support=true && property:ro.boot.mode=normal
    start tne

service tne_dumpstate /system/bin/tne_dumpstate 0xffff0000
    disabled
    oneshot
    keycodes ${ro.tne.dump.keycodes:-none}
    writepid /dev/cpuset/foreground/tasks

on property:debug.tne.trace.reinitsize=*
   write /sys/kernel/debug/tracing/buffer_size_kb ${debug.tne.trace.reinitsize}

#SDD:added by xqzhan XLLLHLWS-6706 20200407 start
on boot && property:ro.transsion.tne.support=true && property:persist.sys.adb.support=1
    write /sys/kernel/debug/tracing/tracing_on 1
    write /sys/kernel/debug/tracing/events/sched/sched_switch/enable 1
    write /sys/kernel/debug/tracing/events/power/cpu_idle/enable 1
    write /sys/kernel/debug/tracing/events/sched/sched_wakeup/enable 1
    write /sys/kernel/debug/tracing/events/sched/sched_wakeup_new/enable 1
    write /sys/kernel/debug/tracing/events/sched/sched_waking/enable 1
    write /sys/kernel/debug/tracing/events/sched/sched_migrate_task/enable 1
    write /sys/kernel/debug/tracing/events/power/cpu_frequency/enable 1
    write /sys/kernel/debug/tracing/buffer_size_kb 8192
    write /sys/kernel/debug/tracing/events/sched/sched_blocked_reason/enable 1
    write /sys/kernel/debug/tracing/events/sched/sched_cpu_hotplug/enable 1
    write /sys/kernel/debug/tracing/events/sched/sched_pi_setprio/enable 1
    mkdir /sys/kernel/debug/tracing/instances/perf
    chmod 755 /sys/kernel/debug/tracing/instances/perf
    write /sys/kernel/debug/tracing/instances/perf/options/print-parent 0
    write /sys/kernel/debug/tracing/instances/perf/options/irq-info 0
    mkdir /sys/kernel/debug/tracing/instances/stab
    chmod 755 /sys/kernel/debug/tracing/instances/stab
    write /sys/kernel/debug/tracing/instances/stab/options/print-parent 0
    write /sys/kernel/debug/tracing/instances/stab/options/print-tgid 0
    write /sys/kernel/debug/tracing/instances/stab/options/irq-info 0
    write /sys/kernel/tracing/tracing_on 1
    write /sys/kernel/tracing/events/sched/sched_switch/enable 1
    write /sys/kernel/tracing/events/power/cpu_idle/enable 1
    write /sys/kernel/tracing/events/sched/sched_wakeup/enable 1
    write /sys/kernel/tracing/events/sched/sched_wakeup_new/enable 1
    write /sys/kernel/tracing/events/sched/sched_waking/enable 1
    write /sys/kernel/tracing/events/sched/sched_migrate_task/enable 1
    write /sys/kernel/tracing/events/power/cpu_frequency/enable 1
    write /sys/kernel/tracing/buffer_size_kb 8192
    write /sys/kernel/tracing/events/sched/sched_blocked_reason/enable 1
    write /sys/kernel/tracing/events/sched/sched_cpu_hotplug/enable 1
    write /sys/kernel/tracing/events/sched/sched_pi_setprio/enable 1
    mkdir /sys/kernel/tracing/instances/perf
    chmod 755 /sys/kernel/tracing/instances/perf
    write /sys/kernel/tracing/instances/perf/options/print-parent 0
    write /sys/kernel/tracing/instances/perf/options/irq-info 0
    mkdir /sys/kernel/tracing/instances/stab
    chmod 755 /sys/kernel/tracing/instances/stab
    write /sys/kernel/tracing/instances/stab/options/print-parent 0
    write /sys/kernel/tracing/instances/stab/options/print-tgid 0
    write /sys/kernel/tracing/instances/stab/options/irq-info 0

    mkdir /sys/kernel/tracing/instances/power
    chmod 755 /sys/kernel/tracing/instances/power
    write /sys/kernel/tracing/instances/power/options/print-parent 0
    write /sys/kernel/tracing/instances/power/options/print-tgid 0
    write /sys/kernel/tracing/instances/power/options/irq-info 0

    mkdir /sys/kernel/debug/tracing/instances/power
    chmod 755 /sys/kernel/debug/tracing/instances/power
    write /sys/kernel/debug/tracing/instances/power/options/print-parent 0
    write /sys/kernel/debug/tracing/instances/power/options/print-tgid 0
    write /sys/kernel/debug/tracing/instances/power/options/irq-info 0

    mkdir /sys/kernel/tracing/instances/cam
    chmod 755 /sys/kernel/tracing/instances/cam
    write /sys/kernel/tracing/instances/cam/options/print-parent 0
    write /sys/kernel/tracing/instances/cam/options/print-tgid 0
    write /sys/kernel/tracing/instances/cam/options/irq-info 0

    mkdir /sys/kernel/debug/tracing/instances/cam
    chmod 755 /sys/kernel/debug/tracing/instances/cam
    write /sys/kernel/debug/tracing/instances/cam/options/print-parent 0
    write /sys/kernel/debug/tracing/instances/cam/options/print-tgid 0
    write /sys/kernel/debug/tracing/instances/cam/options/irq-info 0

    mkdir /sys/kernel/tracing/instances/com
    chmod 755 /sys/kernel/tracing/instances/com
    write /sys/kernel/tracing/instances/com/options/print-parent 0
    write /sys/kernel/tracing/instances/com/options/print-tgid 0
    write /sys/kernel/tracing/instances/com/options/irq-info 0

    mkdir /sys/kernel/debug/tracing/instances/com
    chmod 755 /sys/kernel/debug/tracing/instances/com
    write /sys/kernel/debug/tracing/instances/com/options/print-parent 0
    write /sys/kernel/debug/tracing/instances/com/options/print-tgid 0
    write /sys/kernel/debug/tracing/instances/com/options/irq-info 0

    write /sys/kernel/tracing/options/record-tgid 1

    mkdir /sys/kernel/tracing/instances/mmstat 711
    write /sys/kernel/tracing/instances/mmstat/tracing_on 0
    write /sys/kernel/tracing/instances/mmstat/buffer_size_kb 8
    write /sys/kernel/tracing/instances/mmstat/events/mmstat/enable 1
    write /sys/kernel/tracing/instances/mmstat/tracing_on 1
    write /sys/kernel/debug/tracing/options/record-tgid 1
#SDD:added by xqzhan XLLLHLWS-6706 20200407 end

#SDD:add android_fs for fans by chao.xu5 at 20241023 start
on property:persist.sys.fans.support=1 && property:sys.boot_completed=1
    chmod 666 /sys/kernel/tracing/instances/mmstat/events/android_fs/enable
    chmod 666 /sys/kernel/tracing/instances/mmstat/events/android_fs/android_fs_dataread_start/enable
    chmod 666 /sys/kernel/tracing/instances/mmstat/events/android_fs/android_fs_dataread_end/enable
    chmod 666 /sys/kernel/tracing/instances/mmstat/events/android_fs/android_fs_datawrite_start/enable
    chmod 666 /sys/kernel/tracing/instances/mmstat/events/android_fs/android_fs_datawrite_end/enable
    write /sys/kernel/tracing/instances/mmstat/events/android_fs/enable 1
    write /sys/kernel/tracing/instances/mmstat/events/android_fs/android_fs_dataread_start/enable 1
    write /sys/kernel/tracing/instances/mmstat/events/android_fs/android_fs_datawrite_start/enable 1
#SDD:add android_fs for fans by chao.xu5 at 20241023 end

#SDD:modify by yanbin.zhang 2024/05/16 start
on property:debug.tne.aee.db.08ee=1
    chmod 0644 /data/vendor/aee_exp/db.fatal.08.EE/db.fatal.08.EE.dbg
    copy /data/vendor/aee_exp/db.fatal.08.EE/db.fatal.08.EE.dbg /data/TNE/db.fatal.08.EE.dbg
    chmod 0644 /data/TNE/db.fatal.08.EE.dbg
#SDD:modify by yanbin.zhang 2024/05/16 end
